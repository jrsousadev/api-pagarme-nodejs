{
  "openapi": "3.0.0",
  "info": {
    "title": "API PagarMe V4",
    "description": "Essa API foi criada com o intuito de ajudar pessoas a integrar o Gateway da PagarMe em seus projetos NodeJS.",
    "termsOfService": "API Terms",
    "contact": {
      "email": "jrsousadev@gmail.com"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000/",
      "description": "API Testing"
    }
  ],
  "paths": {
    "/api/cart": {
      "post": {
        "summary": "Create Cart",
        "description": "This route will be responsible for creating a cart",
        "tags": ["Cart"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartRequest"
              },
              "examples": {
                "cart": {
                  "value": {
                    "code": "di42145-49154d-dz495d-5eijd4",
                    "price": 200
                  }
                }
              }
            }
          }
        },
        "responses": {}
      },

      "get": {
        "summary": "Get Carts",
        "description": "This route will be responsible for picking up all the carts",
        "tags": ["Cart"],
        "responses": {}
      }
    },
    "/api/cart/{id}": {
      "put": {
        "summary": "Update Cart",
        "description": "This route will be responsible for updating the cart",
        "tags": ["Cart"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Cart ID to update",
            "required": true,
            "type": "string"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartRequest"
              },
              "examples": {
                "cart": {
                  "value": {
                    "code": "di42145-49154d-dz495d-44444",
                    "price": 450
                  }
                }
              }
            }
          }
        },
        "responses": {}
      },

      "get": {
        "summary": "Get one Cart",
        "description": "This route will be responsible for picking up a cart",
        "tags": ["Cart"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Cart ID to delete",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {}
      },

      "delete": {
        "summary": "Delete Cart",
        "description": "This route will be responsible for deleting the cart",
        "tags": ["Cart"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Cart ID to delete",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {}
      }
    },
    "/api/transaction": {
      "post": {
        "summary": "Create Transaction",
        "description": "This route will be responsible for creating a transaction",
        "tags": ["Cart"],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CartRequest"
              },
              "examples": {
                "cart": {
                  "value": {
                    "code": "di42145-49154d-dz495d-5eijd4",
                    "price": 200
                  }
                }
              }
            }
          }
        },
        "responses": {}
      }
    }
  },

  "components": {
    "schemas": {
      "TransactionRequest": {
        "type": "object",
        "properties": {
          "cartCode": {
            "type": "string"
          },
          "paymentType": {
            "type": "string",
            "enum": ["billet", "credit_card", "pix"]
          },
          "installments": {
            "type": "integer",
            "minimum": 1,
            "maximum": 12
          },
          "customerName": {
            "type": "string"
          },
          "customerEmail": {
            "type": "string"
          },
          "customerMobile": {
            "type": "string"
          },
          "customerDocument": {
            "type": "string"
          },
          "billingAddress": {
            "type": "string"
          },
          "billingNumber": {
            "type": "string"
          },
          "billingNeighborhood": {
            "type": "string"
          },
          "billingCity": {
            "type": "string"
          },
          "billingState": {
            "type": "string"
          },
          "billingZipCode": {
            "type": "string"
          },
          "billingZipComplementary": {
            "type": "string"
          },
          "creditCardNumber": {
            "type": "string",
            "required": false
          },
          "creditCardExpiration": {
            "type": "string",
            "required": false
          },
          "creditCardHolderName": {
            "type": "string",
            "required": false
          },
          "creditCardCvv": {
            "type": "string",
            "required": false
          },
          "pixExpirationDate": {
            "type": "date",
            "required": "false"
          }
        }
      },
      "CartRequest": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "price": {
            "type": "number"
          }
        }
      },
      "CartResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "createdAt": {
            "type": "date"
          },
          "updatedAt": {
            "type": "date"
          }
        }
      }
    }
  }
}
